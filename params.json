{"name":"Accommodationsurvey","tagline":"","body":"# AccommodationSurvey\r\n\r\n## Foundations\r\n\r\nThis is based on the [Heroku HTTP API Design Guide](https://github.com/interagent/http-api-design) and the [18F API Standards](https://github.com/18F/api-standards).\r\n\r\nThe API will be REST based and only provide a single POST message.\r\n\r\nThe API will be versioned and the version number will be included as first parameter in the URL, e.g. `api.stats.govt.nz/api/v1/survey`.\r\n\r\nAuthentication will be done through the use of API keys. There will be one API key for each PMS provider.\r\n\r\nNo caching required.\r\n\r\nNo pagination required.\r\n\r\nThe character set will be UTF-8 for everything.\r\n\r\nTimes will be specified as per [ISO 8601 standard](http://en.wikipedia.org/wiki/ISO_8601).\r\n\r\n### 'POST /survey'\r\n\r\n#### Parameters\r\n\r\n```\r\nsurvey-type     The type of survey this request is for, e.g. `Accommodation`\r\napi-key         The Api key of the PMS provider/intermediary\r\nrequest-id      A client set correlation id that will be returned with each response and can help with debugging.\r\n```\r\n\r\nThese initial parameters need to be provided as GET parameters in the URL. The reason to separate these from the survey payload is the future option to re-use this endpoint for other suryeys.\r\n\r\n`api.stats.govt.nz/api/v1/survey?survey-type=Accommodation&api-key=123456789abcdef&request-id=123xyz`\r\n\r\nThe actual survey data will be sent as structured JSON in the POST request body. The API will allow for one data set of a single accommodation provider to be submitted in each request.\r\n\r\n```\r\n{  \r\n  \"statistics-id\":\"AB1234567\",\r\n  \"year\":2014,\r\n  \"month\":11,\r\n  \"total-stay-unit-nights\":90,\r\n  \"total-nz-guests\":60,\r\n  \"total-overseas-guests\":50,\r\n  \"total-unknown-residence\":10,\r\n  \"total-guest-nights\":120,\r\n  \"total-guest-arrivals\":85,\r\n  \"number-of-stay-units\":8\r\n}\r\n```\r\n\r\n#### Response\r\n\r\nStatus-codes ([reference](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)):\r\n* `201 Created`: Request successful\r\n* `400 Bad request`: The request could not be understood by the server\r\n* `401 Unauthorised`: Request failed because user is not authenticated\r\n* `403 Forbidden`: Request failed because user does not have authorization to access a specific resource\r\n* `429 Too Many Requests`: You have been rate-limited, retry later\r\n* `500 Internal Server Error`: Something went wrong on the server, check status site and/or report the issue\r\n\r\nSuccessful request\r\n```\r\n{\r\n  \"status\": \"Ok\",\r\n  \"timestamp\": \"2014-11-25T11:08:21+12:00\",\r\n  \"request-id\": \"01234567-89ab-cdef-0123-456789abcdef\"\r\n}\r\n```\r\n\r\nErroneous request\r\n```\r\n{\r\n  \"status\": \"Error\",\r\n  \"error-id\": \"234\",\r\n  \"error-message\": \"Invalid provider-id, please provide a valid provider-id\",\r\n  \"case-number\": \"2354234\",\r\n  \"support-contact\": \"api-support@stats.govt.nz or +64-(4)-123 456 789\",\r\n  \"timestamp\": \"2014-11-25T11:08:21+12:00\",\r\n  \"request-id\": \"01234567-89ab-cdef-0123-456789abcdef\"\r\n}\r\n```\r\n\r\n### Security\r\n\r\nThe API will use TLS for encryption and will only have an HTTPS endpoint (no endpoint on port 80).\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}